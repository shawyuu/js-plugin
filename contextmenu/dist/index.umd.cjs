(function(i,c){typeof exports=="object"&&typeof module<"u"?module.exports=c():typeof define=="function"&&define.amd?define(c):(i=typeof globalThis<"u"?globalThis:i||self,i.Contextmenu=c())})(this,function(){"use strict";const i="yu-contextmenu-wrapper",c=function(e){return document.getElementById(e)},b=function(e){return document.querySelector(e)},p=function(e){return document.createElement(e)};let u=null;function m(e,n){let t=c(i);if(t){g(t,e,n);return}t=p("div"),t.id=i,t.className=i,t.style.cssText="background-color: #fff;color: #333;font-size: 15px;line-height: 24px;padding: 8px 0;border-radius: 8px;box-shadow: 0 5px 18px rgba(0,0,0,0.1);position: absolute;left: 0;top: 0;z-index: 99;",h(t),g(t,e,n),document.oncontextmenu=y(),document.onclick=y()}function h(e){let n=document.createDocumentFragment(),t=u.menu;for(let o=0,d=t.length;o<d;o++){if(typeof t[o]=="object"&&t[o]!==null){console.error('Contextmenu:fail parameter "menu" error: expected Array<string|number> but get Array<object> value.');return}let r=p("div");r.className="yu-contextmenu-item",r.innerText=t[o],r.style.cssText="padding: 8px 20px;background-color: transparent;cursor: pointer;",r.onclick=l=>{l.stopPropagation(),u.success&&u.success(o),x()},r.onmouseenter=l=>{r.style.backgroundColor="#f2f2f2"},r.onmouseleave=l=>{r.style.backgroundColor="transparent"},n.appendChild(r)}e.appendChild(n),document.body.appendChild(e)}function g(e,n,t){let o=window.innerWidth,d=window.innerHeight,r=e.getBoundingClientRect(),l=r.width,a=r.height,s=0,f=0;n+l>=o&&t+a>=d?(s=n-l,f=t-a):n+l>=o?(s=n-l,f=t):t+a>=d?(s=n,f=t-a):(s=n,f=t),e.style.left=s+"px",e.style.top=f+"px"}function x(){let e=c(i);e&&(e.remove(),document.oncontextmenu=null,document.onclick=null)}function y(){return function(e){e.preventDefault(),e.stopPropagation(),x()}}function C(e){if(typeof e=="object"&&e!==null){u={menu:Array.isArray(e.menu)?e.menu:[],target:e.target||"",success:e.success||null},u.target||console.error('Contextmenu: fail parameter error: "target" is required in init({}) function.');let t=b(u.target);t.oncontextmenu=o=>{o.preventDefault(),o.stopPropagation();let d=o.pageX,r=o.pageY;m(d,r)}}else console.error(`Contextmenu:fail parameter error: expected <object> but get <${typeof u=="object"?null:typeof u}> value.`)}function w(e){typeof e=="object"&&e!==null?(u={menu:Array.isArray(e.menu)?e.menu:[],pointX:e.pointX||0,pointY:e.pointY||0,success:e.success||null},m(u.pointX,u.pointY)):console.error(`Contextmenu:fail parameter error: expected <object> but get <${typeof u=="object"?null:typeof u}> value.`)}return{init:e=>C(e),show:e=>w(e)}});
